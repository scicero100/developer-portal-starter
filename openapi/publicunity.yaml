openapi: 3.0.3
servers:
  - url: https://qa-pxp-cagetransactions-api.azurewebsites.net/api/v1
info:
  description: >-
    This is an API reference for all public Unity services
  version: 1.0.0
  title: Unity
  contact:
    email: salvatore.cicero@pxpfinancial.com
paths:
  /transactions/ecom/authorisations:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1  
    post:
      summary: Create an ecom Authorisation
      operationId: createEcomAuthorisation
      tags:
        - Transactions
      requestBody:
        description: Authorise a transaction
        required: true      
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant:
                  $ref: "#/components/schemas/merchant"           
                site:
                  $ref: "#/components/schemas/site"
                merchantTransactionReference:
                  $ref: "#/components/schemas/merchantTransactionReference"
                paymentMethod:
                  oneOf:
                    - $ref: "#/components/schemas/card"                  
                    - $ref: "#/components/schemas/ideal"
                    - $ref: "#/components/schemas/applepay"
                authorisationType:
                  $ref: "#/components/schemas/authorisationType" 
                amount:
                  $ref: "#/components/schemas/amount"                  
                shopper:
                  $ref: "#/components/schemas/shopper"
      responses:
        200:
          description: Authorisation Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/moto/authorisations:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1 
    post:
      summary: Create an moto Authorisation
      operationId: createMotoAuthorisation
      tags:
        - Transactions
      requestBody:
        description: Authorise a transaction
        required: true      
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant:
                  $ref: "#/components/schemas/merchant"           
                site:
                  $ref: "#/components/schemas/site"
                merchantTransactionReference:
                  $ref: "#/components/schemas/merchantTransactionReference"
                paymentMethod:
                  oneOf:
                    - $ref: "#/components/schemas/card"                  
                    - $ref: "#/components/schemas/ideal"
                    - $ref: "#/components/schemas/applepay"
                authorisationType:
                  $ref: "#/components/schemas/authorisationType" 
                amount:
                  $ref: "#/components/schemas/amount"                  
                shopper:
                  $ref: "#/components/schemas/shopper"
      responses:
        200:
          description: Authorisation Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/pos/authorisations:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1 
    post:
      summary: Create an pos Authorisation
      operationId: createPosAuthorisation
      tags:
        - Transactions
      requestBody:
        description: Authorise a transaction
        required: true      
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant:
                  $ref: "#/components/schemas/merchant"           
                site:
                  $ref: "#/components/schemas/site"
                merchantTransactionReference:
                  $ref: "#/components/schemas/merchantTransactionReference"
                paymentMethod:
                  oneOf:
                    - $ref: "#/components/schemas/card"                  
                    - $ref: "#/components/schemas/ideal"
                    - $ref: "#/components/schemas/applepay"
                authorisationType:
                  $ref: "#/components/schemas/authorisationType" 
                amount:
                  $ref: "#/components/schemas/amount"                  
                shopper:
                  $ref: "#/components/schemas/shopper"
      responses:
        200:
          description: Authorisation Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/{systemTransactionReference}/incrementals:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1  
    post:
      summary: Increment a Transaction
      operationId: incrementals
      tags:
        - Modifications
      requestBody:
            description: Create an increment
            required: true      
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    merchantTransactionReference:
                      $ref: "#/components/schemas/merchantTransactionReference"
                    amount:
                      $ref: "#/components/schemas/amount"                  
      parameters:
        - name: systemTransactionReference
          in: path
          description: The unique systemTransactionReference with which you want to process the Incremental.
          required: true
          schema:
            $ref: "#/components/schemas/systemTransactionReference"
      responses:
        200:
          description: Incremental Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/{systemTransactionReference}/captures:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1  
    post:
      summary: Capture a Transaction
      operationId: captures
      tags:
        - Modifications
      parameters:
        - name: systemTransactionReference
          in: path
          description: The unique systemTransactionReference with which you want to process the Capture.
          required: true
          schema:
            $ref: "#/components/schemas/systemTransactionReference"
      responses:
        200:
          description: Capture Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/{systemTransactionReference}/refunds:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1  
    post:
      summary: Refund a Transaction
      operationId: refunds
      tags:
        - Modifications
      parameters:
        - name: systemTransactionReference
          in: path
          description: The unique systemTransactionReference with which you want to process the Refund.
          required: true
          schema:
            $ref: "#/components/schemas/systemTransactionReference"
      responses:
        200:
          description: Refund Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/{systemTransactionReference}/cancels:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1
    post:
      summary: Cancel a Transaction
      operationId: cancels
      tags:
        - Modifications
      parameters:
        - name: systemTransactionReference
          in: path
          description: The unique systemTransactionReference with which you want to process a Cancel.
          required: true
          schema:
            $ref: "#/components/schemas/systemTransactionReference"
      responses:
        200:
          description: Cancel Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/authorisationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/cage/depositDetails:
    servers:
      - url: https://merchantEndpoint
    get:
      summary: Get Cage Deposit Details
      operationId: GetCageDepositDetails
      tags:
        - Cage Transactions
      parameters:
        - name: id
          in: query
          description: "The id of the shopper. REQUIRED: If username AND email NOT provided"
          schema:
            type: string
            maxLength: 50
            example: "1ed768bb-e88a-4636-91ae-67927ccbb02b"
        - name: username
          in: query
          description: "The username of the shopper. REQUIRED: If email AND id is NOT provided"
          schema:
            type: string
            maxLength: 100
            example: "john.doe"            
        - name: email
          in: query
          description: "The shopper's email address. REQUIRED: If id AND name is NOT provided"
          schema:
            type: string
            maxLength: 100
            example: "john.doe@pxpfinancial.com"            
      responses:
        200:
          description: Details for the Cage Deposit Transaction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cageDepositTransactionDetailResponse"   
  /transactions/cage/withdrawals:
    servers:
      - url: https://qa-pxp-transactions-api.azurewebsites.net/api/v1  
    post:
      summary: Create a Cage Withdrawal
      operationId: createCageWithdrawal
      tags:
        - Cage Transactions
      requestBody:
        description: Create a Cage Withdrawal
        required: true      
        content:
          application/json:
            schema:
              type: object
              properties:         
                site:
                  $ref: "#/components/schemas/site"
                merchantTransactionReference:
                  $ref: "#/components/schemas/merchantTransactionReference"
                amount:
                  $ref: "#/components/schemas/amount"                  
                shopper:
                  $ref: "#/components/schemas/shopper"
      responses:
        200:
          description: Withdrawal Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/withdrawalResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
        400:
          description: Invalid Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errorCode:
                    $ref: "#/components/schemas/errorCode"
                  errorReason:
                    $ref: "#/components/schemas/errorReason"
                  correlationId:
                    $ref: "#/components/schemas/correlationId"
                  details:
                    $ref: "#/components/schemas/details"
  /transactions/notifications:
    post:
      servers:
        - url: https://merchantEndpoint    
      summary: Send Transaction Notification
      operationId: transactionNotification
      tags:
        - Notifications   
      requestBody:
        description: Transaction Notification
        required: true      
        content:
          application/json:
            schema:
              properties:
                event:
                  type: object
                  properties:
                    code:
                      type: string
                      enum:
                        - approved
                        - authorised
                        - error
                    date:
                      type: string
                      example: "2021-06-28T18:03:50+01:00"
                merchant:
                  $ref: "#/components/schemas/merchant"
                site:
                  $ref: "#/components/schemas/site"
                systemTransactionReference:
                  $ref: "#/components/schemas/systemTransactionReference"
                merchantTransactionReference:
                  $ref: "#/components/schemas/merchantTransactionReference"
                amount:
                  $ref: "#/components/schemas/amount"
      responses:
        200:
          description: Notification Response
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/notificationResponse"               
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
  /merchants:
    servers:
      - url: https://qa-pxp-merchantsetup-api.azurewebsites.net/api/v1
    get:
      summary: List all Merchants
      operationId: listMerchants
      tags:
        - Merchant Setup
      parameters:
        - name: referrer
          in: query
          description: The unique referrer identifier. This value is generated by PXP Financial
          schema:
            type: string
            maxLength: 20
            example: "PART-0001"
      responses:
        200:
          description: An array of merchants
          content:
            application/json:
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/merchants"   
  /merchants/{merchant}:
    servers:
      - url: https://qa-pxp-merchantsetup-api.azurewebsites.net/api/v1
    get:
      summary: Get Merchant Details
      operationId: GetMerchant
      tags:
        - Merchant Setup
      parameters:
        - name: merchant
          in: path
          description: The unique merchant identifier. This value is generated by PXP Financial
          required: true
          schema:
            type: string
            maxLength: 20
            example: "MERC-0001"
      responses:
        200:
          description: Merchant details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/merchants"                     
  /sites:
    servers:
      - url: https://qa-pxp-merchantsetup-api.azurewebsites.net/api/v1
    get:
      summary: List all Sites
      operationId: listSites
      tags:
        - Merchant Setup
      parameters:
        - name: referrer
          in: query
          description: The unique referrer identifier. This value is generated by PXP Financial
          schema:
            type: string
            maxLength: 20
            example: "PART-0001"
        - name: merchant
          in: query
          description: The unique merchant identifier. This value is generated by PXP Financial
          schema:
            type: string
            maxLength: 20
            example: "MERC-0001"            
      responses:
        200:
          description: An array of sites
          content:
            application/json:
              schema:
                type: array
                items:
                   $ref: "#/components/schemas/sites"
  /sites/{site}:
    servers:
      - url: https://qa-pxp-merchantsetup-api.azurewebsites.net/api/v1
    get:
      summary: Get Site Details
      operationId: getSite
      tags:
        - Merchant Setup
      parameters:
        - name: site
          in: path
          description: The unique site identifier. This value is generated by PXP Financial
          required: true
          schema:
            type: string
            maxLength: 20
            example: "SITE-001"
      responses:
        200:
          description: Site Details
          content:
            application/json:
              schema:
                 $ref: "#/components/schemas/sites"               
  /currencies:
    servers:
      - url: https://qa-pxp-systemsetup-api.azurewebsites.net/api/v1
    get:
      summary: List all Currencies
      operationId: listCurrencies
      tags:
        - System Setup
      parameters:
        - name: currencyCode
          in: query
          description: "The ISO 4217 code of the currency"
          schema:
            type: string
            minLength: 3
            maxLength: 3
            example: "GBP"
      responses:
        200:
          description: An array of currencies
          content:
            application/json:
              schema:
                type: array
                items:
                   $ref: "#/components/schemas/currencies"
  /countries:
    servers:
      - url: https://qa-pxp-systemsetup-api.azurewebsites.net/api/v1
    get:
      summary: List all Countries
      operationId: listCoutries
      tags:
        - System Setup
      parameters:
        - name: countryAlphaThreeCode
          in: query
          description: The ISO 3166-1 alpha three code of the country
          schema:
            type: string
            minLength: 3
            maxLength: 3
            example: "GBR"
      responses:
        200:
          description: An array of countries
          content:
            application/json:
              schema:
                type: array
                items:
                   $ref: "#/components/schemas/countries"
  /languages:
    servers:
      - url: https://qa-pxp-systemsetup-api.azurewebsites.net/api/v1
    get:
      summary: List all Languages
      operationId: listLanguages
      tags:
        - System Setup
      parameters:
        - name: threeLetterCode
          in: query
          description: The ISO 639-1 three letter language code
          schema:
            type: string
            minLength: 3
            maxLength: 3
            example: "eng"
      responses:
        200:
          description: An array of languages
          content:
            application/json:
              schema:
                type: array
                items:
                   $ref: "#/components/schemas/languages"
components:
  schemas:
    merchant:
      type: string
      required:
        - merchant
      description: The unique merchant identifier, with which you want to process the transaction. This can be for example a store, hotel, a website etc. This value is generated by PXP Financial
      example: "MERC-0001"
      maximum: 20
    site:
      type: string
      required: 
        - site      
      description: The unique site identifier, with which you want to process the transaction. This can be for example a store, hotel, a website etc. This value is generated by PXP Financial
      example: "SITE-0001"
      maximum: 20
    merchantOrderReference:
      required: 
        - merchantOrderReference
      type: string
      description: The merchantTransactionReference is used to uniquely identify a transaction. This Id is used in all communication with you about the transaction status. There must be a unique value per transaction
      example: "This_is_my_merchant_transaction_Id"
      maximum: 50            
    merchantTransactionReference:
      required: 
        - merchantTransactionReference
      type: string
      description: The merchantTransactionReference is used to uniquely identify a transaction. This Id is used in all communication with you about the transaction status. There must be a unique value per transaction
      example: "This_is_my_merchant_transaction_Id"
      maximum: 50 
    systemTransactionReference:
      required: 
        - systemTransactionReference
      type: string
      example: 1ed768bb-e88a-4636-91ae-67927ccbb02b                    
      pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
      minimum: 36
      maximum: 36  
      description: This is the unique transaction reference returned by Pxp Financial
    transactionState:
      required:
        - state
      type: string
      enum:
        - approved
        - authorised
        - declined
        - referred
      example: approved
      description: This is the state of the transaction
    transactionStateMessage:
      required:
        - state
      type: string
      example: approved
      description: This is the state of the transaction
    providerState:
      required:
        - state
      type: string
      example: approved
      description: This is the state of the transaction returned by the provider
    providerStateMessage:
      required:
        - state
      type: string
      example: approved
      description: This is the state of the transaction returned by the provider     
    amount:
      type: object
      description: This is the amount of the transaction.
      required:
        - amount      
      properties:
        value:
          type: number
          description: This is the amount of the transaction.  The numbers after the decimal will be zero padded if they are less than the expected currency exponent i.e. GBP 1.1 = GBP 1.10 OR EUR 1 = EUR 1.00 OR BHD 1.3 = 1.300  The transaction will be rejected if numbers after the decimal are greater than the expected currency exponent i.e. GBP 1.234 OR if a decimal is supplied when the currency of exponent does not require it i.e. JPY 1.0
          example: 30.32
        currency:
          type: string
          required: 
            - currency
          description: This is the currency of the transaction. This is the currency code. A three character code in accordance with ISO 4217
          minimum: 3
          maximum: 3
          example: "EUR"
    currency:
      type: string
      description: This is the currency of the transaction. This is the currency code. A three character code in accordance with ISO 4217
      required:
        - currency
      minimum: 3
      maximum: 3
      example: "EUR"          
    authorisationType:
      type: string
      enum:
        - preAuthorisation
        - final
      description: This is the type of authorisation
      example: "final"      
    card:
      type: object
      description: "Required if paymentMethod is of type 'Card'" 
      properties:
        card:
          type: object
          required:
            - number
            - expiryMonth
            - expiryYear
            - holderName
            - cvc
          properties:
            number:
              type: string
              pattern: '^[0-9]'
              example: "4444333322221111"
              maximum: 19      
              description: This is the card holder number
            expiryMonth: 
              type: string
              pattern: '^[0-9]'
              example: "03"
              maximum: 2      
              description: This is the expiry month [MM] of the card
            expiryYear: 
              type: string
              pattern: '^[0-9]'
              example: "2025"
              maximum: 4      
              description: This is the expiry year [YYYY] of the card
            holderName: 
              type: string
              pattern: '^[0-9]'
              example: "2025"
              maximum: 4
              description: This is card holders name
            cvc: 
              type: string
              pattern: '^[0-9]'
              example: "123"
              maximum: 4      
              description: This is the cardholder's verification code
    applepay:
      type: object
      description: "Required if payment method is of type 'applepay'" 
      properties:
        applepay:
          type: object
          required:
            - token
          properties:
            token:
              type: string
              example: "VNRWtuNlNEWkRCSm1xWndjMDFFbktkQU"
              maximum: 100      
              description: "This is the applepay token"    
    ideal:
      type: object
      description: "Required if payment method is of type 'applepay'" 
      properties:
        ideal:
          type: object
          required:
            - issuer
          properties:
            issuer:
              type: string
              example: "1121"
              maximum: 100      
              description: "This is the Ideal issuer"
    error:
      required:
        - errorCode
        - errorReason
        - correlationId
      properties:
        errorCode:
          type: string
        errorReason:
          type: string
        correlationId:
          type: string
        details:
          type: array  
          items: {}
    errorCode:
      type: string
      description: "This is the error code return for the operation"
      example: "INVALID_REQUEST"
      required:
        - errorCode
    errorReason:
      type: string
      description: "This is the error reason return for the operation"
      example: "One or more validation errors occurred."
      required:
        - errorReason
    correlationId:
      type: string
      example: "81f32b80-2ba0-4430-8ecd-0b559274ba9c"
      description: "This is a unqiue reference generated by the PSP to locate the error"
      required:
        - correlationId
    details:
      type: array  
      items: {}
      example: ["'$.site - The site field is required."]
    shopper:
      description: "This is the details of the shopper"
      required:
        - id
        - firstName
        - lastName
        - dateOfBirth
        - email
      properties:
        id:
          type: string
          pattern: '^[A-Za-z0-9 _-]'
          example: "Shopper_01"
          maximum: 50      
          description: This is the unique identifier of the shopper
        firstName:
          type: string
          description: This is the first name of the shopper
          example: John          
          maximum: 100
        lastName:
          type: string
          maximum: 100
          example: Doe
          description: This is the last name of the shopper
        dateOfBirth: 
          type: string
          minimum: 10
          maximum: 10
          format: date
          description: This is the date of birth of the shopper. Format [YYYY-MM-DD]
        email: 
          type: string
          maximum: 100
          format: email
          description: This is the email address of the shopper
          example: "john.doe@pxpfinancial.com"
    cageShopper:
      description: "This is the details of the cage shopper"
      required:
        - id
        - username
        - email
        - firstName
        - lastName
        - dateOfBirth
        - identityNumber
        - homePhoneNumber
        - mobilePhoneNumber
        - language
        - address
      properties:
        id:
          type: string
          pattern: '^[A-Za-z0-9 _-]'
          example: "Shopper_01"
          maximum: 50      
          description: This is the unique identifier of the shopper
        firstName:
          type: string
          description: This is the first name of the shopper
          example: John          
          maximum: 100
        lastName:
          type: string
          maximum: 100
          example: Doe
          description: This is the last name of the shopper
        dateOfBirth: 
          type: string
          minimum: 10
          maximum: 10
          format: date
          description: This is the date of birth of the shopper. Format [YYYY-MM-DD]
        email: 
          type: string
          maximum: 100
          format: email
          description: This is the email address of the shopper
          example: "john.doe@pxpfinancial.com"
        identityNumber: 
          type: string
          maximum: 100
          description: This is the identity number of the shopper
          example: "12345678"
        homePhoneNumber: 
          type: string
          maximum: 25
          description: This is the home phone number of the shopper
          example: "+4401920123456"
        mobilePhoneNumber: 
          type: string
          maximum: 25
          description: This is the mobile phone number of the shopper
          example: "+4407876123456"   
        language:
          type: string
          maximum: 2
          description: The ISO 639-1 two letter code of the language of the shopper
          example: "EN"       
        address:
          $ref: "#/components/schemas/address"         
    cageDepositTransactionDetailResponse:
      required:
        - cageShopper
        - limits
        - merchantTransactionReference
      properties:
        shopper:
          $ref: "#/components/schemas/cageShopper"
        limits:
          type: array
          items:
            type: object
            properties:
              minLimitAmount:
                type: number
                example: 0.01
              maxLimitAmount:
                type: number         
                example: 15.01
              currency:
                $ref: "#/components/schemas/currency"
        merchantTransactionReference:
          $ref: "#/components/schemas/merchantTransactionReference"          
    withdrawalResponse:
      required:
        - systemTransactionReference
        - state
        - stateMessage
      properties:
        systemTransactionReference:
          $ref: "#/components/schemas/systemTransactionReference"
        state:
          required:
            - pending
          type: string
          enum:
            - pending
          example: pending
          description: This is the state of the transaction  
        stateMessage:
          $ref: "#/components/schemas/transactionStateMessage"
    authorisationResponse:
      required:
        - systemTransactionReference
        - state
        - stateMessage
        - approvalCode
        - cvcResult
        - avsResult
      properties:
        systemTransactionReference:
          $ref: "#/components/schemas/systemTransactionReference"
        state:
          $ref: "#/components/schemas/transactionState"
        stateMessage:
          $ref: "#/components/schemas/transactionStateMessage"          
        authorityCode:
          type: string
          required:
            - authorityCode
          example: "123456"
        cvcResult:
          type: string
          required:
            - cvcResult
          enum:
            - noInformationAvailable
            - cardSecurityCodeMatched
            - cardSecurityCodeNotMatched
            - cardSecurityCodeNotChecked
          description: This is the card verification result
        avsResult:
          type: string
          required:
            - avsResult
          enum:
            - noInformationAvailable
            - postCodeMatchedAddressMatched
            - postCodeMatchedAddressNotMatched
            - postCodeMatchedAddressNotChecked
            - postCodeNotMatchedAddressMatched
            - postCodeNotMatchedAddressNotMatched
            - postCodeNotMatchedAddressNotChecked
            - postCodeNotCheckedAddressMatthed
            - postCodeNotCheckedAddressNotMatched
            - postCodeNotCheckedAddressNotChecked
            - postCodeMatchedANDAddressPartialMatch
            - postCodePartialMatchAddressMatched
            - postCodePartialMatchAddressPartialMatch
            - postCodeNotMatchedAddressPartialMatch
            - postCodePartialMatchAddressNotMatched
            - postCodePartialMatchAddressNotChecked
            - postCodeNotCheckedAddressPartialMatch
        providerResult:
          $ref: "#/components/schemas/providerResult"          
    providerResult:
      required:
        - state
        - stateMessage
        - merchantId
        - cardSchemeReference
        - rawCvcResult
        - rawAvsResult
      properties:
        state:
          $ref: "#/components/schemas/providerState"
        stateMessage:
          $ref: "#/components/schemas/providerStateMessage"
        merchantId:
          type: string
          required: 
            - merchantId
          example: 77772182
        cardSchemeReference:
          type: string
          required:
            - cardSchemeReference
          example: "A125221525"
        rawCvcResult:
          type: string
          example: A
        rawAvsResult:
          type: string
          example: D
    notificationResponse:
      required:
        - state
        - stateMessage
      properties:
        state:
          type: string
          example: "Success"
          enum:
            - Success
          description: "This is the result of the merchants response to a PXP Financial Notification request"
        stateMessage:
          type: string
          example: "Success"
          description: "This is the state message of the merchants response to a PXP Financial Notification request"
    transactionResponse:
      required:
        - systemTransactionReference
        - state
        - stateMessage
      properties:
        systemTransactionReference:
          type: string
          example: 1ed768bb-e88a-4636-91ae-67927ccbb02b                    
          pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'
          minimum: 36
          maximum: 36  
          description: This is the unique transaction reference returned by Pxp Financial
        state:
          type: string
          example: "Approved"
          description: This is the result of the transaction
          enum:
            - Approved
        stateMessage:
          type: string
          example: "Approved"
          description: This is the result message of the transaction
    merchants:
      required:
        - id
        - name
        - merchantCategoryCode
        - address  
      properties:
          id: 
            type: string
            example: "MERC-0001"
            maximum: 20
            description: The unique merchant identifier, with which you want to process the transaction. This value is generated by PXP Financial
          name: 
            type: string  
            example: "Merchant Account 1"
            maximum: 100
            description: The merchant name, with which you want to process the transaction. This value is generated by PXP Financial
          merchantCategoryCode: 
            type: string  
            example: "5541"
            minimum: 4
            maximum: 4
            description: The merchant category code assigned to the merchant
          address: 
            $ref: "#/components/schemas/address"
            description: Address details
    sites:
      required:
        - id
        - name
        - merchantId
      properties:
          id: 
            type: string
            example: "SITE-0001"
            maximum: 20
            description: The unique site identifier, with which you want to process the transaction. This value is generated by PXP Financial
          name: 
            type: string  
            example: "Site 1"
            maximum: 100
            description: The site name, with which you want to process the transaction. This value is generated by PXP Financial
          merchantId: 
            type: string  
            example: "MERC-0001"
            maximum: 20
            description: The unique merchant identifier associated with the site identifier 
    address:
      required:
        - street
        - houseNo
        - houseName
        - postalCode
        - city
        - state
        - country
      properties:
        street:
          type: string
          example: "Street Name"
          description: "The street name of the occupant"
          maximum: 100         
        houseNo:
          type: number
          example: 120
          description: "The house number of the occupant"
          maximum: 10            
        houseName:
          type: string
          example: "House Name"
          description: "The house name of the occupant"
          maximum: 100  
        postalCode:
          type: string
          example: "Postal Code"
          description: "The postal code of the occupant"
          maximum: 15
        city:
          type: string
          example: "City"
          description: "The city of the occupant"
          maximum: 100  
        state:
          type: string
          example: "State"
          description: "The state of the occupant"
          maximum: 100
        country:
          type: string
          example: "GB"
          description: "The country of the occupant.  This is an ISO 3166-1 format"
          minimum: 2
          maximum: 2            
    currencies:
      required:
        - code
        - numericCode
        - name
        - symbol
        - exponent
      properties:
          code: 
            type: string
            example: "GBP"
            minimum: 3
            maximum: 3
            description: "The ISO 4217 code of the currency"
          numericCode: 
            type: string  
            example: "826"
            minimum: 3
            maximum: 3
            description: "The ISO 4217 numeric code of the currency"
          name: 
            type: string  
            example: "British Pound"
            description: "The name of the currency"
          symbol: 
            type: string  
            example: "Â£"
            description: "The symbol of the currency"
          exponent: 
            type: integer  
            example: 2
            description: "The minor units of the currency"
    countries:
      required:
        - twoLetterCode
        - threeLetterCode
        - numericCode
        - name
      properties:
        twoLetterCode: 
          type: string
          example: "GB"
          minimum: 2
          maximum: 2
          description: "The ISO 3166-1 two letter code of the country"
        threeLetterCode: 
          type: string  
          example: "GBR"
          minimum: 3
          maximum: 3
          description: "The ISO 3166-1 three letter code of the country"
        numericCode: 
          type: string
          minimum: 3
          maximum: 3            
          example: "826"
          description: "The ISO 3166-1 numeric code of the country"
        name: 
          type: string  
          example: "The United Kingdom of Great Britain and Northern Ireland"
          description: The name of the country
    languages:
      required:
        - twoLetterCode
        - threeLetterCode
        - name
      properties:
        twoLetterCode: 
          type: string
          example: "en"
          minimum: 2
          maximum: 2
          description: "The ISO 639-1 two letter code of the language"
        threeLetterCode:
          type: string  
          example: "eng"
          minimum: 3
          maximum: 3
          description: "The ISO 639-1 three letter code of the language"
        name: 
          type: string  
          example: "English"
          description: The name of the language
    moto:
      type: object
      description: "Required if paymentMethod is of type 'card'" 
      properties:
        moto:
          type: object
          properties:
            addressVerification:
              $ref: "#/components/schemas/addressVerification"
    ecom:
      type: object
      description: "Required if paymentMethod is of type 'card'" 
      properties:
        ecom:
          type: object
          properties:
            addressVerification:
              $ref: "#/components/schemas/addressVerification"    
            threeDSecure:
              $ref: "#/components/schemas/threeDSecure"
    addressVerification:
      required:
        - houseNumberOrName
        - postalCode
        - country          
      properties:
        houseNumberOrName: 
          type: string
          example: "en"
          maximum: 100
          description: "The number or name of the house"
        postalCode:
          type: string  
          example: ""
          maximum: 10
          description: "A maximum of five digits for an address in the US, or a maximum of ten characters for an address in all other countries"
        country: 
          type: string  
          example: "GB"
          description: "The two-character country code as defined in ISO-3166-1 alpha-2"   
    threeDSecure:
      required:
        - status
        - threeDSecureVersion
      properties:
        status: 
          type: string
          example: "frictionlessAuthenticated"
          enum:
            - frictionlessAuthenticated
          description: "This is the final status during the 3D Secure process. Refer to ThreeDSecure Status under Elements (CONDITIONAL: Required if not supplying threeDSecureId)"
        threeDSecureVersion:
          type: string  
          example: "2.1.0"
          description: "This is the 3D Secure version returned by PXP's Three D Secure Service. Must be in the format N.N.N (CONDITIONAL: Required if not supplying threeDSecureId)"